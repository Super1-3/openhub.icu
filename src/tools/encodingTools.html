<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>编解码工具箱 - OpenHub</title>
    <meta name="description" content="集成的 Base64、URL、Unicode 编解码工具。支持文本与图片的 Base64 转换，中文与 Unicode 互转。">
    <link rel="icon" type="image/svg+xml" href="../../favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Button Styles */
        .btn-primary {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 24px;
            background-color: #4f46e5; /* indigo-600 */
            color: white;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(79, 70, 229, 0.2);
        }
        
        .btn-primary:hover {
            background-color: #4338ca; /* indigo-700 */
            box-shadow: 0 4px 6px rgba(79, 70, 229, 0.3);
            transform: translateY(-1px);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 24px;
            background-color: white;
            color: #374151; /* gray-700 */
            border: 1px solid #e5e7eb; /* gray-200 */
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        .btn-secondary:hover {
            background-color: #f9fafb; /* gray-50 */
            border-color: #d1d5db; /* gray-300 */
            color: #111827; /* gray-900 */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transform: translateY(-1px);
        }

        .btn-secondary:active {
            transform: translateY(0);
        }
        
        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            background-color: transparent;
            color: #9ca3af; /* gray-400 */
            border: 1px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-icon:hover {
            color: #dc2626; /* red-600 */
            background-color: #fef2f2; /* red-50 */
            border-color: #fee2e2; /* red-100 */
            transform: translateY(-1px);
        }

        .btn-icon:active {
            transform: translateY(0);
        }
        
        .tab-active {
            background-color: white;
            color: #4338ca; /* indigo-700 */
            box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.05), 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
        }
        .tab-inactive {
            color: #6b7280; /* gray-500 */
            transition: all 0.2s;
        }
        .tab-inactive:hover {
            color: #374151; /* gray-700 */
            background-color: #f3f4f6; /* gray-100 */
        }

        /* Toast Notification */
        #toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 50px;
            padding: 12px;
            position: fixed;
            z-index: 50;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s, bottom 0.3s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        #toast.show {
            visibility: visible;
            opacity: 1;
            bottom: 50px;
        }
    </style>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-white border-b border-gray-200 z-10 shrink-0 sticky top-0">
        <div class="px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <a href="../../index.html" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
                    <div class="w-7 h-7 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-md flex items-center justify-center text-white font-bold shadow-sm text-sm">
                        O
                    </div>
                    <span class="font-bold text-lg tracking-tight text-gray-900">OpenHub<span class="text-indigo-600">.icu</span></span>
                </a>
                <span class="text-gray-300 mx-2">/</span>
                <span class="text-gray-600 font-medium text-sm">编解码工具箱</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 w-full max-w-6xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <!-- Main Tabs -->
        <div class="flex p-1 space-x-1 bg-gray-200/80 rounded-xl mb-6 max-w-md mx-auto backdrop-blur-sm">
            <button onclick="switchTab('base64')" id="tab-btn-base64" class="tab-active w-full py-2.5 text-sm font-medium leading-5 rounded-lg transition-all duration-200">Base64</button>
            <button onclick="switchTab('url')" id="tab-btn-url" class="tab-inactive w-full py-2.5 text-sm font-medium leading-5 rounded-lg transition-all duration-200">URL</button>
            <button onclick="switchTab('unicode')" id="tab-btn-unicode" class="tab-inactive w-full py-2.5 text-sm font-medium leading-5 rounded-lg transition-all duration-200">Unicode</button>
        </div>

        <!-- Base64 Content -->
        <div id="content-base64" class="space-y-6">
            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                <!-- Sub Tabs -->
                <div class="flex border-b border-gray-100">
                    <button onclick="switchBase64Mode('text')" id="subtab-text" class="px-6 py-3 text-sm font-medium text-indigo-600 border-b-2 border-indigo-600 transition-colors">文本转换</button>
                    <button onclick="switchBase64Mode('image')" id="subtab-image" class="px-6 py-3 text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors">图片 Base64</button>
                </div>

                <!-- Text Mode -->
                <div id="base64-text-mode" class="p-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">输入</label>
                            <textarea id="b64-text-input" class="w-full h-64 p-4 bg-gray-50 border border-gray-200 rounded-xl font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none transition-shadow" placeholder="在此输入需要转换的内容..."></textarea>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">输出</label>
                                <button onclick="copyToClipboard('b64-text-output')" class="text-xs text-indigo-600 hover:text-indigo-700 font-medium">复制结果</button>
                            </div>
                            <textarea id="b64-text-output" readonly class="w-full h-64 p-4 bg-gray-50 border border-gray-200 rounded-xl font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none transition-shadow" placeholder="转换结果将显示在这里..."></textarea>
                        </div>
                    </div>
                    <div class="flex items-center justify-center gap-4 mt-6">
                        <button onclick="base64Encode()" class="btn-primary min-w-[120px]">Base64 编码</button>
                        <button onclick="base64Decode()" class="btn-secondary min-w-[120px]">Base64 解码</button>
                        <button onclick="document.getElementById('b64-text-input').value = ''; document.getElementById('b64-text-output').value = '';" class="p-2 text-gray-400 hover:text-red-500 transition-colors" title="清空">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                        </button>
                    </div>
                </div>

                <!-- Image Mode -->
                <div id="base64-image-mode" class="hidden p-6">
                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- Image to Base64 -->
                        <div class="space-y-4">
                            <h3 class="text-base font-semibold text-gray-900">图片转 Base64</h3>
                            <div class="relative group">
                                <input type="file" id="img-input" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" onchange="handleImageUpload(this)">
                                <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center transition-colors group-hover:border-indigo-400 bg-gray-50">
                                    <div class="text-gray-500 mb-2">
                                        <svg class="w-8 h-8 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                        <span class="text-sm font-medium">点击或拖拽上传图片</span>
                                    </div>
                                    <p class="text-xs text-gray-400">支持 PNG, JPG, GIF, SVG, WEBP</p>
                                </div>
                            </div>
                            <div class="relative">
                                <textarea id="img-b64-output" readonly class="w-full h-40 p-3 pr-12 bg-gray-50 border border-gray-200 rounded-lg font-mono text-xs text-gray-600 resize-none focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="Base64 编码结果..."></textarea>
                                <button onclick="copyToClipboard('img-b64-output')" class="absolute top-2 right-2 p-1.5 bg-white border border-gray-200 rounded-md text-gray-500 hover:text-indigo-600 shadow-sm transition-all" title="复制">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>
                                </button>
                            </div>
                        </div>

                        <!-- Base64 to Image -->
                        <div class="space-y-4">
                            <h3 class="text-base font-semibold text-gray-900">Base64 转图片</h3>
                            <textarea id="b64-img-input" class="w-full h-32 p-3 bg-white border border-gray-200 rounded-lg font-mono text-xs focus:ring-2 focus:ring-indigo-500 outline-none resize-none" placeholder="粘贴 Base64 字符串到这里..." oninput="handleBase64ToImage(this.value)"></textarea>
                            <div class="border border-gray-200 rounded-xl p-4 bg-white min-h-[200px] flex items-center justify-center relative overflow-hidden bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iI2YwZjBmMCI+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIi8+PHJlY3QgeD0iMTAiIHk9IjEwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiLz48L3N2Zz4=')]">
                                <img id="img-preview" class="max-w-full max-h-[300px] object-contain hidden shadow-sm" alt="Preview">
                                <span id="img-placeholder" class="text-sm text-gray-400">图片预览区域</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- URL Content -->
        <div id="content-url" class="hidden">
            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">URL 输入</label>
                        <textarea id="url-input" class="w-full h-64 p-4 bg-gray-50 border border-gray-200 rounded-xl font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none transition-shadow" placeholder="在此输入 URL..."></textarea>
                    </div>
                    <div class="space-y-2">
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">输出</label>
                            <button onclick="copyToClipboard('url-output')" class="text-xs text-indigo-600 hover:text-indigo-700 font-medium">复制结果</button>
                        </div>
                        <textarea id="url-output" readonly class="w-full h-64 p-4 bg-gray-50 border border-gray-200 rounded-xl font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none transition-shadow" placeholder="结果..."></textarea>
                    </div>
                </div>
                <div class="flex items-center justify-center gap-4 mt-8">
                    <button onclick="urlEncode()" class="btn-primary min-w-[140px]">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>
                        URL 编码
                    </button>
                    <button onclick="urlDecode()" class="btn-secondary min-w-[140px]">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                        URL 解码
                    </button>
                    <button onclick="document.getElementById('url-input').value = ''; document.getElementById('url-output').value = '';" class="btn-icon" title="清空内容">
                         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Unicode Content -->
        <div id="content-unicode" class="hidden">
            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">输入</label>
                        <textarea id="unicode-input" class="w-full h-64 p-4 bg-gray-50 border border-gray-200 rounded-xl font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none transition-shadow" placeholder="输入中文或 Unicode 编码 (\uXXXX)..."></textarea>
                    </div>
                    <div class="space-y-2">
                        <div class="flex items-center justify-between">
                            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">输出</label>
                            <button onclick="copyToClipboard('unicode-output')" class="text-xs text-indigo-600 hover:text-indigo-700 font-medium">复制结果</button>
                        </div>
                        <textarea id="unicode-output" readonly class="w-full h-64 p-4 bg-gray-50 border border-gray-200 rounded-xl font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none transition-shadow" placeholder="结果..."></textarea>
                    </div>
                </div>
                <div class="flex items-center justify-center gap-4 mt-8">
                    <button onclick="textToUnicode()" class="btn-primary min-w-[160px]">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path></svg>
                        中文转 Unicode
                    </button>
                    <button onclick="unicodeToText()" class="btn-secondary min-w-[160px]">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path></svg>
                        Unicode 转中文
                    </button>
                    <button onclick="document.getElementById('unicode-input').value = ''; document.getElementById('unicode-output').value = '';" class="btn-icon" title="清空内容">
                         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                    </button>
                </div>
            </div>
        </div>

    </main>

    <!-- Toast Notification -->
    <div id="toast">
        <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
        <span id="toast-message">复制成功</span>
    </div>

    <script>
        // Tab Logic
        const tabs = ['base64', 'url', 'unicode'];
        function switchTab(tabId) {
            tabs.forEach(t => {
                const btn = document.getElementById(`tab-btn-${t}`);
                const content = document.getElementById(`content-${t}`);
                if (t === tabId) {
                    btn.classList.add('tab-active');
                    btn.classList.remove('tab-inactive');
                    content.classList.remove('hidden');
                } else {
                    btn.classList.remove('tab-active');
                    btn.classList.add('tab-inactive');
                    content.classList.add('hidden');
                }
            });
        }

        // Base64 Sub-tab Logic
        function switchBase64Mode(mode) {
            const textBtn = document.getElementById('subtab-text');
            const imgBtn = document.getElementById('subtab-image');
            const textMode = document.getElementById('base64-text-mode');
            const imgMode = document.getElementById('base64-image-mode');

            if (mode === 'text') {
                textBtn.classList.add('text-indigo-600', 'border-b-2', 'border-indigo-600');
                textBtn.classList.remove('text-gray-500');
                imgBtn.classList.remove('text-indigo-600', 'border-b-2', 'border-indigo-600');
                imgBtn.classList.add('text-gray-500');
                textMode.classList.remove('hidden');
                imgMode.classList.add('hidden');
            } else {
                imgBtn.classList.add('text-indigo-600', 'border-b-2', 'border-indigo-600');
                imgBtn.classList.remove('text-gray-500');
                textBtn.classList.remove('text-indigo-600', 'border-b-2', 'border-indigo-600');
                textBtn.classList.add('text-gray-500');
                imgMode.classList.remove('hidden');
                textMode.classList.add('hidden');
            }
        }

        // Logic Implementation
        
        // Helper: Copy
        async function copyToClipboard(elementId) {
            const el = document.getElementById(elementId);
            if (!el) return;
            
            try {
                await navigator.clipboard.writeText(el.value);
                showToast("已成功复制到剪贴板！");
            } catch (err) {
                console.error('Failed to copy', err);
                showToast("复制失败，请重试");
            }
        }

        function showToast(message) {
            const toast = document.getElementById("toast");
            if (!toast) return;
            
            // Try to find the message span, or create it if missing
            let msg = document.getElementById("toast-message");
            if (!msg) {
                msg = toast.querySelector("span");
            }
            
            if (msg) {
                msg.innerText = message;
            }
            
            toast.className = "show";
            setTimeout(function(){ 
                toast.className = toast.className.replace("show", ""); 
            }, 3000);
        }

        // 1. Base64 Text
        function utf8_to_b64(str) {
            return window.btoa(unescape(encodeURIComponent(str)));
        }

        function b64_to_utf8(str) {
            return decodeURIComponent(escape(window.atob(str)));
        }

        function base64Encode() {
            const input = document.getElementById('b64-text-input').value;
            try {
                document.getElementById('b64-text-output').value = utf8_to_b64(input);
            } catch (e) {
                document.getElementById('b64-text-output').value = "Error: " + e.message;
            }
        }

        function base64Decode() {
            const input = document.getElementById('b64-text-input').value;
            try {
                document.getElementById('b64-text-output').value = b64_to_utf8(input);
            } catch (e) {
                document.getElementById('b64-text-output').value = "Error: Invalid Base64 string";
            }
        }

        // 2. Base64 Image
        function handleImageUpload(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const b64 = e.target.result;
                    document.getElementById('img-b64-output').value = b64;
                    // Also preview it for convenience? Maybe just text output as requested, but I'll update preview too.
                    // Actually, let's keep it simple: Top section is Image -> Text.
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function handleBase64ToImage(b64) {
            const img = document.getElementById('img-preview');
            const placeholder = document.getElementById('img-placeholder');
            
            if (!b64 || b64.trim() === '') {
                img.classList.add('hidden');
                placeholder.classList.remove('hidden');
                return;
            }

            // Check if has data URI scheme, if not, try to add it assuming png (or just let browser fail)
            // But usually Base64 from tools might be raw. Let's try to detect.
            let src = b64.trim();
            if (!src.startsWith('data:image')) {
                // Heuristic: default to png if raw base64
                src = 'data:image/png;base64,' + src;
            }
            
            img.src = src;
            img.onload = () => {
                img.classList.remove('hidden');
                placeholder.classList.add('hidden');
            };
            img.onerror = () => {
                // If failed, maybe it's not an image or invalid format
                // Keep placeholder or show error? For now simple logic.
            };
        }

        // 3. URL
        function urlEncode() {
            const input = document.getElementById('url-input').value;
            document.getElementById('url-output').value = encodeURIComponent(input);
        }

        function urlDecode() {
            const input = document.getElementById('url-input').value;
            try {
                document.getElementById('url-output').value = decodeURIComponent(input);
            } catch (e) {
                document.getElementById('url-output').value = "Error: Malformed URL sequence";
            }
        }

        // 4. Unicode
        function textToUnicode() {
            const input = document.getElementById('unicode-input').value;
            let res = '';
            for (let i = 0; i < input.length; i++) {
                const hex = input.charCodeAt(i).toString(16).padStart(4, '0');
                // Only escape non-ascii or escape everything? 
                // Usually tools escape everything or at least extended chars.
                // Let's escape everything > 127 or all? 
                // "Unicode ↔ 中文" implies escaping Chinese.
                if (input.charCodeAt(i) > 127) {
                     res += '\\u' + hex;
                } else {
                     res += input[i];
                }
            }
            // Actually, some users want full escape. Let's do full escape if it looks like they want to normalize.
            // But standard is usually escaping non-ascii.
            // Let's stick to escaping non-ASCII (Chinese, etc).
            document.getElementById('unicode-output').value = res;
        }

        function unicodeToText() {
            const input = document.getElementById('unicode-input').value;
            try {
                // Replace \uXXXX (case insensitive) with actual character
                const res = input.replace(/\\u([\dA-F]{4})/gi, (match, grp) => {
                    return String.fromCharCode(parseInt(grp, 16));
                });
                document.getElementById('unicode-output').value = res;
            } catch (e) {
                document.getElementById('unicode-output').value = "Error: " + e.message;
            }
        }

    </script>
</body>
</html>